<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="https://cdn.staticfile.org/jquery/2.1.4/jquery.min.js"></script><script src="camera.98d4fcf7.js"></script><title>2D角色实时捕获</title><style>.view,body,html{width:100%;height:100%;position:relative;box-sizing:border-box;color:#ddd}#video{border:1px solid red;transform:scaleX(-1);display:none}.camera-canvas{position:absolute;left:0;top:0;border:1px solid green;z-index:1;display:none}.illustration-canvas{display:block}#stats{display:none;position:absolute;bottom:0;left:0;z-index:1}#status{padding:10px 4px;box-sizing:border-box;border:1px solid #aaa;background:rgba(0,255,0,.5)}#gui,#status{width:100%}</style></head><body> <div id="manage" class="view" style="display:none;"> <div id="status"></div> <div id="gui"></div> </div> <div id="main" class="view" style="display:none;"> <video id="video" playsinline=""></video> <canvas id="output" class="camera-canvas"></canvas> <canvas id="keypoints" class="camera-canvas"></canvas> <div id="stats"></div> <canvas class="illustration-canvas"> </canvas></div> </body><script>function e(){var e=new WebSocket("ws:/127.0.0.1:5432/?name=".concat(document.name,"&bManage=").concat(document.bManage));e.onopen=function(n){console.log("Connection to server opened:"+e.readyState)},e.onmessage=function(e){var n=JSON.parse(e.data);if("status"==n.type){var o=document.getElementById("status");o&&(o.innerText=n.text)}else"selectCamera"==n.type?document.posAnimator.changeCamera(n.deviceID):"person"==n.type?document.posAnimator.parseSVG(n.value):n.type&&document.posAnimator.setState(n.type,n.value)},e.onclose=function(e){console.log("WebSocketClosed:",document.name)},document.ws=e}$(document).ready(function(){var n=location.href.split("param=")[1]||"";(n=decodeURIComponent(n))&&(n=JSON.parse(n)),console.log("param:",n),document.bManage=n.bManage,document.name=n.pluginName;try{e()}catch(o){console.log("initWebsockt fail:",o)}document.bManage?($("#manage").show(),document.posAnimator.setupGui()):($("#main").show(),document.posAnimator.startPosAnimator())});</script></html>