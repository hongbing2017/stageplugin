<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="https://cdn.staticfile.org/jquery/2.1.4/jquery.min.js"></script><script src="camera.f0252132.js"></script><title>2D角色实时捕获</title><style>.view,body,html{width:100%;height:100%;position:relative;box-sizing:border-box;color:#ddd}#video{width:200px;border:1px solid red;-moz-transform:scaleX(-1);-o-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1)}#video,.camera-canvas{height:300px;display:none}.camera-canvas{position:absolute;left:0;top:0;width:300px;border:1px solid green;z-index:1}.illustration-canvas{display:block}#stats{display:none;position:absolute;bottom:0;left:0;z-index:1}#status{padding:10px 4px;box-sizing:border-box;border:1px solid #aaa}#gui,#status{width:100%}</style></head><body> <div id="manage" class="view" style="display:none;"> <div id="status"></div> <div id="gui"></div> </div> <div id="main" class="view" style="display:none;"> <video id="video" playsinline=""></video> <canvas id="output" class="camera-canvas"></canvas> <canvas id="keypoints" class="camera-canvas"></canvas> <div id="stats"></div> <canvas class="illustration-canvas"> </canvas></div> </body><script>function e(){var e=new WebSocket("ws:/127.0.0.1:5432/?name=".concat(document.name,"&bManage=").concat(document.bManage));e.onopen=function(o){console.log("Connection to server opened:"+e.readyState)},e.onmessage=function(e){var o=JSON.parse(e.data);if("status"==o.type){var n=document.getElementById("status");n&&(n.innerText=o.text)}else"selectCamera"==o.type?document.posAnimator.changeCamera(o.deviceID):"person"==o.type?document.posAnimator.parseSVG(o.value):o.type&&document.posAnimator.setState(o.type,o.value)},e.onclose=function(e){console.log("WebSocketClosed:",document.name)},document.ws=e}$(document).ready(function(){var o=location.href.split("param=")[1]||"";(o=decodeURIComponent(o))&&(o=JSON.parse(o)),console.log("param:",o),document.bManage=o.bManage,document.name=o.pluginName;try{e()}catch(n){console.log("initWebsockt fail:",n)}document.bManage?($("#manage").show(),document.posAnimator.setupGui()):($("#main").show(),document.posAnimator.startPosAnimator(),$("body").resize(function(){console.log("view resize"),doucment.posAnimator.initCanvas()}))});</script></html>